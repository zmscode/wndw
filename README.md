# wndw

A Zig-idiomatic wrapper around [RGFW](https://github.com/ColleagueRiley/RGFW) — a lightweight, cross-platform windowing library. Packaged for `zig fetch` usage.

## Features

- **Window lifecycle** — create, close, resize, move, minimize, maximize, fullscreen
- **Input** — keyboard (edge & level triggered), mouse buttons, scroll, cursor position, raw mouse
- **Events** — poll-based event loop with typed event structs
- **Monitors** — enumeration, display modes, gamma, workarea, scaling
- **Clipboard** — read/write text
- **Drag & drop** — file drop events
- **Cursors** — standard shapes + custom cursors from pixel data
- **OpenGL** — context management, swap buffers, vsync, extension queries
- **Software rendering** — surface creation and blitting
- **Platform utilities** — UTF-8 decoding, Wayland opt-in, macOS resource dir, X11 class names

## Design

- Single-file Zig API: `src/root.zig`
- RGFW C header vendored at `vendor/rgfw/RGFW.h`
- RGFW implementation unit generated by `build.zig` (STB-style)
- Idiomatic Zig conventions: `bool` instead of C bools, optional-based APIs, buffer-based outputs, namespace structs for constants

## Install

```sh
zig fetch --save=wndw git+https://github.com/zmscode/wndw.git
```

## Use in build.zig

```zig
const wndw_dep = b.dependency("wndw", .{
    .target = target,
    .optimize = optimize,

    // Optional RGFW toggles:
    // .rgfw_debug = false,
    // .rgfw_opengl = false,
    // .rgfw_native = false,
});

exe.root_module.addImport("wndw", wndw_dep.module("wndw"));
```

## Quick start

```zig
const wndw = @import("wndw");

pub fn main() !void {
    const window = try wndw.init("my app", 800, 600, .{
        .centred = true,
        .resizable = true,
    });
    defer window.close();

    while (!window.shouldClose()) {
        window.poll();

        if (window.isKeyPressed(wndw.key.escape)) {
            window.setShouldClose(true);
        }

        if (window.isMousePressed(wndw.mouse.left)) {
            const pos = window.mousePosition();
            _ = pos;
        }
    }
}
```

## Window flags

Flags can be set at creation time via `init` or changed at runtime via `setFlags`:

```zig
const window = try wndw.init("app", 800, 600, .{ .border = false, .centered = true });

window.setFlags(.{ .fullscreen = true });
```

Available options (all `?bool`, default `null` = unchanged):

| Flag | Description |
|------|-------------|
| `centered` / `centred` | Center the window on screen |
| `resizable` | Allow user resizing |
| `border` | Show window border/title bar |
| `fullscreen` | Fullscreen mode |
| `floating` | Always-on-top |
| `hidden` | Hide the window |
| `maximize` | Maximize the window |
| `minimize` | Minimize the window |
| `hide_mouse` | Hide the mouse cursor |
| `focus_on_show` | Auto-focus when shown |
| `focus` | Request focus |
| `transparent` | Transparent window |
| `allow_dnd` | Enable drag and drop |

## Event types

Use `event_type.*` constants to match against `event.type`:

| Constant | Description |
|----------|-------------|
| `event_type.key_pressed` | Key pressed |
| `event_type.key_released` | Key released |
| `event_type.key_char` | Character input (Unicode codepoint) |
| `event_type.mouse_button_pressed` | Mouse button pressed |
| `event_type.mouse_button_released` | Mouse button released |
| `event_type.mouse_pos_changed` | Mouse moved |
| `event_type.mouse_scroll` | Scroll wheel |
| `event_type.focus_in` / `focus_out` | Window focus changed |
| `event_type.mouse_enter` / `mouse_leave` | Cursor entered/left window |
| `event_type.window_moved` | Window moved |
| `event_type.window_resized` | Window resized |
| `event_type.window_refresh` | Window needs redraw |
| `event_type.window_maximized` / `minimized` / `restored` | Window state changed |
| `event_type.quit` | Window close requested |
| `event_type.data_drop` / `data_drag` | File drag and drop |
| `event_type.scale_updated` | DPI/scale changed |
| `event_type.monitor_connected` / `disconnected` | Monitor hotplug |

## Namespaces

Constants are organized into namespaces:

- `wndw.key.*` — keyboard scancodes (`key.escape`, `key.space`, `key.a`, ...)
- `wndw.mouse.*` — mouse buttons (`mouse.left`, `mouse.right`, `mouse.middle`, ...)
- `wndw.cursor.*` — cursor shapes (`cursor.arrow`, `cursor.ibeam`, `cursor.hand`, ...)
- `wndw.keymod.*` — modifier masks (`keymod.shift`, `keymod.control`, `keymod.alt`, ...)
- `wndw.event_type.*` — event discriminators (see table above)
- `wndw.event_flag.*` — event flag bitmasks
- `wndw.gl.*` — OpenGL globals (swap interval, proc address, hints, ...)

## Build options

| Option | Description |
|--------|-------------|
| `-Drgfw_debug=true` | Enable RGFW debug logging |
| `-Drgfw_opengl=true` | Enable OpenGL context helpers |
| `-Drgfw_native=true` | Expose native backend structs |

## Local development

```sh
zig build        # compile
zig build test   # run tests
```

## Roadmap

See [TODO.md](TODO.md) for remaining RGFW API coverage, organized into implementation phases.

## License

Same license as [RGFW](https://github.com/ColleagueRiley/RGFW) (zlib).
